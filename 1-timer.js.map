{"version":3,"file":"1-timer.js","sources":["../src/img/erro.svg","../src/js/1-timer.js"],"sourcesContent":["export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='%23000000'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.6%201c1.6.1%203.1.9%204.2%202%201.3%201.4%202%203.1%202%205.1%200%201.6-.6%203.1-1.6%204.4-1%201.2-2.4%202.1-4%202.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9%209.2.8%207.5%201.3%206c.5-1.6%201.4-2.9%202.8-3.8C5.4%201.3%207%20.9%208.6%201zm.5%2012.9c1.3-.3%202.5-1%203.4-2.1.8-1.1%201.3-2.4%201.2-3.8%200-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8%201-1.1.8-1.9%201.9-2.3%203.3-.4%201.3-.4%202.7.2%204%20.6%201.3%201.5%202.3%202.7%203%201.2.7%202.6.9%203.9.6zM7.9%207.5L10.3%205l.7.7-2.4%202.5%202.4%202.5-.7.7-2.4-2.5-2.4%202.5-.7-.7%202.4-2.5-2.4-2.5.7-.7%202.4%202.5z'/%3e%3c/svg%3e\"","import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/erro.svg';\n\nconst timeInput = document.querySelector('#datetime-picker');\nconst button = document.querySelector('[data-start]');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nbutton.disabled = true;\ntimeInput.disabled = false;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  dateFormat: 'Y-m-d H:i',\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    const selectedDate = selectedDates[0];\n    if (!selectedDate) return;\n    const currentDate = new Date();\n    if (selectedDate < currentDate) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        color: '#EF4040',\n        iconUrl: errorIcon,\n      });\n      userSelectedDate = null;\n      button.disabled = true;\n    } else {\n      userSelectedDate = selectedDate;\n      button.disabled = false;\n    }\n  },\n};\n\nflatpickr(timeInput, options);\n\nlet userSelectedDate = null;\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nconst timer = {\n  intervalId: null,\n  initTime: null,\n\n  start() {\n    if (!userSelectedDate) return;\n    this.intervalId = setInterval(() => {\n      this.tick();\n    }, 1000);\n    button.disabled = true;\n    timeInput.disabled = true;\n  },\n\n  tick() {\n    const currentTime = Date.now();\n    const ms = userSelectedDate - currentTime;\n    const time = convertMs(ms);\n    days.textContent = addLeadingZero(time.days);\n    hours.textContent = addLeadingZero(time.hours);\n    minutes.textContent = addLeadingZero(time.minutes);\n    seconds.textContent = addLeadingZero(time.seconds);\n\n    if (ms < 1000) {\n      clearInterval(this.intervalId);\n      button.disabled = false;\n      timeInput.disabled = false;\n    }\n  },\n};\n\nbutton.addEventListener('click', () => {\n  timer.start();\n});\n"],"names":["errorIcon","timeInput","button","days","hours","minutes","seconds","options","selectedDates","selectedDate","iziToast","userSelectedDate","flatpickr","convertMs","ms","addLeadingZero","value","timer","currentTime","time"],"mappings":"+IAAA,MAAeA,EAAA,+7BCOTC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvDJ,EAAO,SAAW,GAClBD,EAAU,SAAW,GAErB,MAAMM,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,WAAY,YACZ,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5B,MAAMC,EAAeD,EAAc,CAAC,EACpC,GAAI,CAACC,EAAc,OAEfA,EADgB,IAAI,MAEtBC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,MAAO,UACP,QAASV,CACjB,CAAO,EACDW,EAAmB,KACnBT,EAAO,SAAW,KAElBS,EAAmBF,EACnBP,EAAO,SAAW,GAErB,CACH,EAEAU,EAAUX,EAAWM,CAAO,EAE5B,IAAII,EAAmB,KAEvB,SAASE,EAAUC,EAAI,CAQrB,MAAMX,EAAO,KAAK,MAAMW,EAAK,KAAG,EAE1BV,EAAQ,KAAK,MAAOU,EAAK,MAAO,IAAI,EAEpCT,EAAU,KAAK,MAAQS,EAAK,MAAO,KAAQ,GAAM,EAEjDR,EAAU,KAAK,MAASQ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASS,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,MAAMC,EAAQ,CACZ,WAAY,KACZ,SAAU,KAEV,OAAQ,CACDN,IACL,KAAK,WAAa,YAAY,IAAM,CAClC,KAAK,KAAI,CACV,EAAE,GAAI,EACPT,EAAO,SAAW,GAClBD,EAAU,SAAW,GACtB,EAED,MAAO,CACL,MAAMiB,EAAc,KAAK,MACnBJ,EAAKH,EAAmBO,EACxBC,EAAON,EAAUC,CAAE,EACzBX,EAAK,YAAcY,EAAeI,EAAK,IAAI,EAC3Cf,EAAM,YAAcW,EAAeI,EAAK,KAAK,EAC7Cd,EAAQ,YAAcU,EAAeI,EAAK,OAAO,EACjDb,EAAQ,YAAcS,EAAeI,EAAK,OAAO,EAE7CL,EAAK,MACP,cAAc,KAAK,UAAU,EAC7BZ,EAAO,SAAW,GAClBD,EAAU,SAAW,GAExB,CACH,EAEAC,EAAO,iBAAiB,QAAS,IAAM,CACrCe,EAAM,MAAK,CACb,CAAC"}